<ion-content>
  <ng-container *ngIf="!isLoading; else loading">
    <ion-list>
      <ion-item *ngFor="let pokemon of pokemons" (click)="openDetails(pokemon)">
        <ion-thumbnail slot="start">
          <img [src]="pokemon.imageUrl" [alt]="pokemon.name" />
        </ion-thumbnail>
        <ion-label>
          {{ pokemon.name | titlecase }}
          <p>ID: {{ pokemon.id }}</p>
        </ion-label>
        <ion-button fill="clear" slot="end" (click)="toggleFavorite(pokemon); $event.stopPropagation()">
          <ion-icon [name]="isFavorite(pokemon) ? 'heart' : 'heart-outline'" color="danger"></ion-icon>
        </ion-button>
      </ion-item>
    </ion-list>

    <ion-infinite-scroll threshold="100px" (ionInfinite)="loadPokemons($event)" [disabled]="!canLoadMore()">
      <ion-infinite-scroll-content loadingSpinner="dots"
        loadingText="Carregando mais PokÃ©mon..."></ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </ng-container>

  <ng-template #loading>
    <ion-spinner name="crescent" class="ion-padding"></ion-spinner>
  </ng-template>
</ion-content>
